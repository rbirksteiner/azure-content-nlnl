<properties
   pageTitle="Azure Service Fabric Actor 模式和反向模式簡介"
   description="適用於 Service Fabric Actor 的設計模式"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="03/17/2015"
   ms.author="claudioc"/>

# Service Fabric 設計模式簡介
Microsoft Azure Service Fabric Actor 模型是一種依動作項目模型建立，以在雲端規模解決實際問題的平台。Azure Service Fabric 是一種平台，可為雲端與內部部署建置高可靠性、可調整性且可輕鬆開發與管理的應用程式。這篇文章是實際問題相關的實用文章。在通過閱讀各種模式後，您應該能夠了解如何使用 Service Fabric Actor 模型來建置解決方案的「企業」或「雲端」的解決方案。

## 模式
在本節中，我們將列出一組模式及我們與客戶溝通期間相關聯的案例。這些模式代表各種問題的類別，並適用於客戶在 Microsoft Azure 上建置各種不同的解決方案。雖然案例皆為實際情況，但我們已剔除大部分的特定網域問題，讓讀者更清楚此模式。您可能會發現大部分的範例程式碼很簡單或很明顯。我們為了完整起見而包括該程式碼，並非因為有任何特別優秀或令人印象深刻的地方。本文中所呈現的模式並非完整或標準方法，有些開發人員可能會以異於我們的方式解決相同的問題或模式。

[模式：智慧型快取](service-fabric-reliable-actors-pattern-smart-cache.md)

[模式：分散式網路和圖形](service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md)

[模式：資源管理](service-fabric-reliable-actors-pattern-resource-governance.md)

[模式：可設定狀態的服務組合](service-fabric-reliable-actors-pattern-stateful-service-composition.md)

[模式：物聯網](service-fabric-reliable-actors-pattern-internet-of-things.md)

[模式：分散式計算](service-fabric-reliable-actors-pattern-distributed-computation.md)

[某些反向模式](service-fabric-reliable-actors-anti-patterns.md)

### 深入了解動作項目的簡史
動作項目模型的起源為 Hewitt 等人於1973年所發佈的[論文](http://dl.acm.org/citation.cfm?id=1624804)，但動作項目模型在近期作為處理分散式系統中並行與複雜性的方法後，才開始獲得較多的注意。動作項目模型支援與彼此隔離的精細個別物件，亦即動作項目。透過非同步的訊息傳遞，可讓動作項目之間進行直接通訊。動作項目會以單一執行緒的語意執行。透過結合動作項目狀態的封裝並與其他動作項目隔離，這將從動作項目的程式碼移除並行考量，從而簡化高度平行處理系統的撰寫。可用硬體資源集區上將動態建立動作項目。[Erlang](http://www.erlang.org/) 是動作項目模型最受歡迎的實作。開發人員已經開始重新發現可以重新引起對 Erlang 的興趣，以及建立新的類 Erlang 解決方案的動作項目模型：[Scala](http://www.scala-lang.org/) 動作項目、[Akka](http://akka.io)、[Akka.net](http://getakka.net/) 和 [DCell](http://research.microsoft.com/pubs/75988/dcell.pdf)。

## Azure Service Fabric 的簡短概覽
Azure 網狀架構動作項目是動作項目的實作，由 Erlang 和分散式物件系統所啟發、新增動作項目間接層，並運用 Azure Service Fabric 平台將其公開於已整合的程式設計模型。Azure 網狀架構動作項目的主要優點是：1) **開發人員生產力**，甚至適用於非專業的程式設計人員；和 2) 不需程式設計人員特別花費力氣的 **預設透明延展性**。Azure 網狀架構動作項目是在 Azure 網狀架構上執行的 .NET 程式庫和工具，可讓複雜的分散式應用程式開發更加容易，並在設計上讓所產生的應用程式可調整。我們在下方逐一展開這些優點。Azure 網狀架構動作項目的程式設計模型，將藉由提供下列關鍵抽象概念、保證和系統服務，提升專業與非專業程式設計人員的產能。

* *熟悉物件導向程式設計 (OOP) 的範例*。動作項目是 .NET 類別的實作，用以宣告具有非同步方法和屬性的 .NET 動作項目介面。因此程式設計人員將動作項目視為可以直接叫用其方法/屬性的遠端物件。這將提供程式設計人員熟悉的 OOP 範例，透過將呼叫方法轉為訊息、路由至正確的端點、叫用目標動作項目的方法，及以完全透明的方式處理錯誤和極端案例。

* *單一執行緒執行的動作項目。* Azure 網狀架構執行階段保證動作項目永遠不會同時執行一個以上的執行緒。結合與其他動作項目隔離，程式設計人員永遠不會面臨動作項目層級的並行存取，因此永遠不需要使用鎖定或其他同步處理機制控制共用資料的存取。單靠這項功能就能讓非專業程式設計人員開發分散式應用程式更容易。

* *透明的啟動過程。* Azure 網狀架構執行階段只會在收到處理訊息後，才會啟動所需的動作項目。這將清楚分隔由邏輯建立，對應用程式程式碼而言為可見及可控制的動作項目，以及在記憶體中實體啟動，對應用程式而言為透明的動作項目。Azure 網狀架構動作項目是類似虛擬記憶體，並決定何時將動作項目「移出分頁」(停用) 或「移入分頁」(啟動)；此應用程式可不中斷地存取由邏輯建立動作項目的完整「記憶體空間」，無論其是否於任何特定時間點在實體記憶體裡。透明啟動能夠透過動作項目硬體資源集區的放置和移轉，啟用可調整的動態負載平衡。

* *位置透明度。* 動作項目參考 (proxy 物件)，為程式設計人員用來叫用動作項目的方法，或用於傳遞到其他僅包含邏輯動作項目的身分識別元件。動作項目的邏輯身分識別翻譯至其實體位置及對應的訊息路由，是由 Azure 網狀架構執行階段以透明的方式完成。應用程式程式碼與動作項目明顯的實體位置進行溝通，該實體位置可能因失敗、資源管理或呼叫已停用的動作項目，而在日後有所異動。

* *持續性存放區的透明整合。* Azure 網狀架構動作項目允許動作項目在記憶體中的狀態，以宣告式對應持續性的存放區。將會同步處理更新、以透明方式確保呼叫端僅在永續性狀態成功更新後，才會接收結果。

* *高可用性，容錯移轉支援與應用程式生命週期管理。* Azure 網狀架構動作項目狀態由平台管理，並以如果 (例如叢集中的一個節點) 失敗仍可還原的方式複寫。Azure Service Fabric 也會管理應用程式生命週期，並允許完全不需停機的應用程式升級。Azure 網狀架構動作項目的程式設計模型，是設計用於引導程式設計人員在調整其應用程式或服務時，踏上數倍於原本可能成功機率的路徑。這是藉由納入經過實證的最佳作法和模式，並提供有效率的低層級系統功能實作。以下是一些讓 Azure 網狀架構應用程式啟用延展性和效能的關鍵因素。

* *應用程式狀態的隱含微調資料分割。* 使用動作項目作為直接定址的實體，程式設計人員將隱含地細分其應用程式的整體狀態。雖然Azure 網狀架構動作項目程式設計模型並未規定一個動作項目多大或多小，在大部分情況下合理的動作項目相對大量 (數百萬或更多)，每個皆代表應用程式的自然實體，例如使用者帳戶、訂單和其他等等。由執行階段抽離其實體位置和可個別定址動作項目，Azure 網狀架構動作項目無需任何應用程式開發人員考量，在負載平衡和在運用透明且泛型的方式處理作用點上，擁有極大的彈性。

* *調適性的資源管理。* 因為位置透明，所以動作項目不會為與其互動的其他動作項目做任何假設，而Azure 網狀架構能夠以非常靈活的方式，為計算叢集中所放置/移轉的動作項目進行決策微調，來管理和調整可用的硬體資源配置，並因應載入連入要求不會失敗的通訊模式。藉由建立多個特定動作項目的複本，執行階段必要時可以增加動作項目的輸送量，而且不會對應用程式程式碼進行任何變更。

* *多工通訊。* Azure 網狀架構中的動作項目有邏輯端點，而其之間的訊息透過一組固定的全部對全部實體連線 (TCP 通訊端)，進行多工傳送。這可讓 Azure 網狀架構動作項目執行階段，裝載數目非常大量 (數以百萬計) 的可定址實體，而每個動作項目皆不會造成任何 OS 負荷。此外，啟用/停用的動作項目並不會產生註冊/取消註冊的實體端點，例如 TCP 連接埠或 HTTP URL。

* *有效率的排程。* Azure 網狀架構執行階段排程，將在每個實體處理器核心，以一個執行緒在自訂執行緒集區，執行大量的單一執行緒動作項目。所撰寫的非封鎖接續型樣式動作項目程式碼 (Azure 網狀架構動作項目程式設計模型的需求)，將與應用程式程式碼在沒有爭用的情況下，以非常有效率的「合作」方式執行多執行緒。這可讓系統達到高輸送量，並在絕佳穩定性下以非常高的 CPU 使用率 (多達 90 + %) 執行。動作項目數目在系統中的成長和負載，並不會導致額外執行緒或其他作業系統的基本型別，將幫助個別節點和整個系統的延展性。

* *明確的非同步。* Azure 網狀架構動作項目程式設計模型，使非同步性質的分散式應用程式更明確，並輔助程式設計人員撰寫非封鎖的非同步程式碼。這可啟用大規模的分散式平行處理原則及整體輸送量，而不需明確地使用多執行緒。
 

<!---HONumber=July15_HO2-->